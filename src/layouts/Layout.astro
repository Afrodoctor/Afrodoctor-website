---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';

export interface Props {
  title: string;
}

const { title } = Astro.props;
const siteTitle = "Afrodoctor";
const description = "Advancing digital health systems to achieve equity in health access in Africa.";
const twitterHandle = "@HealthSolutions";
---
<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content={description} />
    <meta name="theme-color" content="#1e3a8a" />
    <meta property="og:title" content={`${title} | ${siteTitle}`} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/images/og-image.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content={twitterHandle} />
    <link rel="icon" href="/logo.png" />
    <title>{title} | {siteTitle}</title>
    <link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin />

    <style is:inline>
      /* Consult prefers-color-scheme and apply the color-scheme for browser UI */
      @media (prefers-color-scheme: dark) {
        :root {
          color-scheme: dark;
        }
      }
      @media (prefers-color-scheme: light) {
        :root {
          color-scheme: light;
        }
      }

      .reduced-motion * {
        animation: none !important;
        transition: none !important;
      }
    </style>
  </head>
  <body class="min-h-screen font-sans antialiased bg-white dark:bg-gray-900 text-gray-900 dark:text-white transition-colors duration-300">
    <a href="#content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:px-3 focus:py-2 focus:rounded-md focus:shadow-lg focus:z-50 bg-white dark:bg-gray-900 text-gray-900 dark:text-white">
      Skip to content
    </a>

    <Header />
    <main id="content" tabindex="-1">
      <slot />
    </main>
    <Footer />

    <script>
      (function(){
        try {
          // Put .dark on <html> when the device prefers dark, so Tailwind `dark:` classes work.
          const setDarkClass = (prefersDark: boolean) => {
            if (prefersDark) {
              document.documentElement.classList.add('dark');
            } else {
              document.documentElement.classList.remove('dark');
            }
          };

          // initial set based on system preference
          const media = window.matchMedia('(prefers-color-scheme: dark)');
          setDarkClass(media.matches);

          // listen for changes (user switches system theme)
          if (typeof media.addEventListener === 'function') {
            media.addEventListener('change', (e) => setDarkClass(e.matches));
          } else if (typeof media.addListener === 'function') {
            // fallback for older browsers
            media.addListener((e) => setDarkClass(e.matches));
          }

          // reduced motion handling (existing behavior)
          const rmq = window.matchMedia('(prefers-reduced-motion: reduce)');
          if (rmq && rmq.matches) {
            document.documentElement.classList.add('reduced-motion');
          }
        } catch (e) {
          console.error(e);
        }
      })();
    </script>
  </body>
</html>